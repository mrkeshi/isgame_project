{% load static %}
{% load poll_extras %}
<div class="row">
    <div class="my-loader" style="display:none">
        <div class="loader mx-auto"></div>
    </div>
    <a href="javascript:void(0);"
       class="dropdown-item " id="allbtn" style="cursor: pointer;display:none;"
       data-toggle="modal" data-target="#exampleModal">حذف</a>
    <div class="col-sm-12">
        <table id="style-1" class="table style-1 table-hover non-hover dataTable no-footer"
               role="grid" aria-describedby="style-1_info" style="width: 1539px;">
            <thead>
            <tr role="row">
                <th style="width: 57px;">
                    <label
                            class="new-control new-checkbox checkbox-outline-primary m-auto">
                        <input type="checkbox"
                               class="new-control-input chk-parent select-customers-info"
                               id="All_Checked">
                        <span class="new-control-indicator"></span><span
                            style="visibility:hidden">c</span>
                    </label></th>
                <th style="width: 180px;">نویسنده
                </th>
                <th style="width: 400px;">دیدگاه
                </th>
                <th style="width: 240px;"> پاسخ به
                </th>
                <th style="width: 60px;">
                    <div class="icon-container">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="25px" height="25px" viewBox="0 -30 645 645"><path d="M297.297 550.868c-13.774-15.437-48.17-45.529-76.435-66.874-83.744-63.242-95.142-72.395-129.144-103.703-62.684-57.721-89.305-115.71-89.213-194.34.044-38.384 2.66-53.172 13.409-75.797C34.152 71.768 61.015 43.245 95.36 25.799c24.326-12.355 36.323-17.845 76.945-18.07 42.493-.235 51.438 4.72 76.435 18.452 30.424 16.714 61.739 52.436 68.213 77.811l3.998 15.672 9.859-21.584c55.716-121.973 233.599-120.148 295.502 3.031 19.638 39.076 21.794 122.513 4.381 169.513-22.716 61.309-65.38 108.05-164.007 179.676-64.681 46.974-137.885 118.046-142.98 128.028-5.916 11.589-.283 1.817-26.409-27.46z" fill="red"/></svg>
                        <span class="icon-name"></span>
                    </div>
                </th>
                <th style="width: 250px;">تاریخ
                </th>
                <th style="width: 110px;">وضیعت
                </th>
                <th style="width: 150px;">عملیات
                </th>
            </tr>
            </thead>

            <tbody>
            {% for comment in Comments %}
            <tr role="row" class="odd" data-field-number={{ comment.id }} >
                <td class="checkbox-column sorting_1"><label
                        class="new-control new-checkbox checkbox-outline-primary  m-auto">
                    <input data-field-number="{{ comment.id }}" type="checkbox"
                           class="new-control-input customer-all-info child-chk inputchecked select-customers-info">
                    <span class="new-control-indicator"></span><span
                        style="visibility:hidden">C</span>
                </label></td>
                <td class="" style="display:flex;flex-direction:column;">
                    <div style="display:flex;align-items: flex-end;" class="mb-1">
                        {% get_avatar comment.email as avatar %}
                                                <img style="border-radius:10%" src="{% if avatar %}  {{avatar}} {% else %} {% static 'Home/images/userP.png' %} {% endif %}" width="40px" height="40px" alt="">

                        <label class="text-dark ml-2" style="font-weight:bolder">{{comment.name}}</label>
                    </div>
                    <span class="text-info">{{comment.email}}</span>
                    <span class="text-dark">{{comment.ip}}</span>
                </td>
                <td>{{ comment.message  }}</td>
                <td>
                    <a href="{{comment.post.get_absolute_url}}" style="font-weight:bolder" class="text-info">{{comment.post.title}}</a>
                </td>
                <td>
                    <b class="text-danger">5</b>
                </td>
                <td>{{ comment.created | jalali_date }}</td>
                <td>
                    {% if comment.active %}

                    <span class="badge badge-success">منتشر شده</span>
                    {% else %}
                    <span class="badge badge-danger">در اننظار تایید </span>

                    {% endif %}
                </td>
                <td class="">
                    <div class="dropdown custom-dropdown">
                        <a class="dropdown-toggle" href="#" role="button"
                           id="dropdownMenuLink1" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                 height="24"
                                 viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round"
                                 class="feather feather-more-horizontal">
                                <circle cx="12" cy="12" r="1"></circle>
                                <circle cx="19" cy="12" r="1"></circle>
                                <circle cx="5" cy="12" r="1"></circle>
                            </svg>
                        </a>

                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink1">

                            <a href="" class="dropdown-item"
                            >پاسخ</a>
                            {%  if comment.active == False %}
    <a  class="dropdown-item posted_btn" style="cursor:pointer" data-id="{{comment.id}}"
                            >تایید</a>
                            {% endif %}
                            <a href="javascript:void(0);"
                               class="dropdown-item deleteBtn" style="cursor: pointer"
                               data-toggle="modal" data-target="#exampleModal">حذف</a>


                        </div>
                    </div>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 col-md-5">
        <div class="dataTables_info" id="style-1_info" role="status" aria-live="polite">
            صفحه {{ Comments.number }} از
            {{paginator.num_pages}}
        </div>
    </div>
    <div class="col-sm-12 col-md-7">
        <div class="dataTables_paginate paging_simple_numbers" id="style-1_paginate">
            <ul class="pagination">
                {% if Comments.has_previous %}
                <li class="paginate_button page-item next" id="zero-config_next">
                    <a href="?page={{ Comments.previous_page_number }}"
                       aria-controls="zero-config"
                       data-dt-idx="5"
                       tabindex="0"
                       class="page-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24"
                             fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round"
                             stroke-linejoin="round"
                             class="feather feather-arrow-right">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </a></li>
                {% endif %}


                {% get_proper_elided_page_range paginator Comments.number as page_range %}


                {% for i in page_range %}
                {% if Comments.number == i %}
                <li class="paginate_button page-item active">
                    <a style="padding:8px !important" href="?page={{ i }}" aria-controls="zero-config"
                       data-dt-idx="1"
                       tabindex="0" class="page-link">{{ i }}</a>
                </li>
                {% else %}
                {% if i == paginator.ELLIPSIS %}
                <li class="page-item">
                    <span class="page-link">{{ paginator.ELLIPSIS }}</span>
                </li>
                {% else %}
                <li class="paginate_button page-item">
                    <a href="?page={{ i }}" aria-controls="zero-config"
                       data-dt-idx="1"
                       tabindex="0" class="page-link">{{ i }}</a>
                </li>
                {% endif %}
                {% endif %}
                {% endfor %}

                <li></li>
                {% if Comments.has_next %}
                <li class="paginate_button page-item previous "
                    id="zero-config_previous"><a
                        href="?page={{ Comments.next_page_number }}"
                        aria-controls="zero-config"
                        data-dt-idx="0" tabindex="0" class="page-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                         viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2"
                         stroke-linecap="round"
                         stroke-linejoin="round" class="feather feather-arrow-left">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                </a></li>

                {% endif %}


            </ul>
        </div>
    </div>
</div>