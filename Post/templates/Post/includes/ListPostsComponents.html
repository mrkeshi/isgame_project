{% load static %}
{% load poll_extras %}
<div class="row">
    <div class="my-loader" style="display:none">
        <div class="loader mx-auto"></div>
    </div>
    <a href="javascript:void(0);"
       class="dropdown-item " id="allbtn" style="cursor: pointer;display:none;"
       data-toggle="modal" data-target="#exampleModal">حذف</a>
    <div class="col-sm-12">
        <table id="style-1" class="table style-1 table-hover non-hover dataTable no-footer"
               role="grid" aria-describedby="style-1_info" style="width: 1539px;">
            <thead>
            <tr role="row">
                <th style="width: 57px;">
                    <label
                            class="new-control new-checkbox checkbox-outline-primary m-auto">
                        <input type="checkbox"
                               class="new-control-input chk-parent select-customers-info"
                               id="All_Checked">
                        <span class="new-control-indicator"></span><span
                            style="visibility:hidden">c</span>
                    </label></th>
                <th style="width: 330px;">عنوان
                </th>
                <th
                        style="width: 175px;">نویسنده
                </th>
                <th style="width: 150px;">دسته بندی
                </th>
                <th style="width: 200px;"> برچسپ
                </th>
                <th style="width: 80px;">
                    <div class="icon-container">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                             viewBox="0 0 24 24" fill="none" stroke="currentColor"
                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="feather feather-message-circle">
                            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                        </svg>
                        <span class="icon-name"></span>
                    </div>
                </th>
                <th style="width: 250px;">تاریخ
                </th>
                <th style="width: 100px;">تصویر
                </th>
                <th style="width: 110px;">وضیعت
                </th>
                <th style="width: 150px;">عملیات
                </th>
            </tr>
            </thead>

            <tbody>
            {% for article in Articles %}
            <tr role="row" class="odd" data-field-number={{ article.id }}>
                <td class="checkbox-column sorting_1"><label
                        class="new-control new-checkbox checkbox-outline-primary  m-auto">
                    <input data-field-number="{{article.id}}" type="checkbox"
                           class="new-control-input customer-all-info child-chk inputchecked select-customers-info"
                    >
                    <span class="new-control-indicator"></span><span
                        style="visibility:hidden">c</span>
                </label></td>
                <td>{{ article.title }}</td>
                <td>{{ article.author.get_full_name }}</td>
                <td>
                    {% if article.categories.all %}
                    {% for cat in article.categories.all %}
                    {{ cat.title }}
                    {% if forloop.counter != article.categories.count %} ,
                    {% endif %}
                    {% endfor %}
                    {% else %}
                    بدون دسته بندی
                    {% endif %}
                </td>
                <td>
                    {% if article.tags.all %}
                    {% for tag in article.tags.all %}
                    {{ tag.title }}
                    {% if forloop.counter != article.tags.count %} ,
                    {% endif %}
                    {% endfor %}
                    {% else %}
                    بدون تگ
                    {% endif %}
                </td>
                <td class="">
                    5
                </td>
                <td>{{ article.created_date | jalali_date }}</td>
                <td>
                    <a class="profile-img" href="javascript: void(0);">
                        {% if article.image %}
                        <img src="{{ article.image.url }}"
                             alt="product">
                        {% else %}
                        <img src="{% static 'admin_panel/assets/img/90x90.jpg' %}"
                             alt="product">
                        {% endif %}
                    </a>
                </td>
                <td>
                    {% if article.is_active %}

                    <span class="badge badge-success">منتشر شده</span>
                    {% else %}
                    <span class="badge badge-info">پیش نویس</span>

                    {% endif %}
                </td>
                <td class="">
                    <div class="dropdown custom-dropdown">
                        <a class="dropdown-toggle" href="#" role="button"
                           id="dropdownMenuLink1" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                 height="24"
                                 viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round"
                                 class="feather feather-more-horizontal">
                                <circle cx="12" cy="12" r="1"></circle>
                                <circle cx="19" cy="12" r="1"></circle>
                                <circle cx="5" cy="12" r="1"></circle>
                            </svg>
                        </a>

                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink1">
                            <a class="dropdown-item"
                               href="javascript:void(0);">مشاهده</a>
                            <a href="{% url 'post_edit_admin' id=article.id %}" class="dropdown-item"
                            >ویرایش</a>

                            <a href="javascript:void(0);"
                               class="dropdown-item deleteBtn" style="cursor: pointer"
                               data-toggle="modal" data-target="#exampleModal">حذف</a>


                        </div>
                    </div>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 col-md-5">
        <div class="dataTables_info" id="style-1_info" role="status" aria-live="polite">
            صفحه {{ Articles.number }} از
            {{paginator.num_pages}}
        </div>
    </div>
    <div class="col-sm-12 col-md-7">
        <div class="dataTables_paginate paging_simple_numbers" id="style-1_paginate">
            <ul class="pagination">
                {% if Articles.has_previous %}
                <li class="paginate_button page-item next" id="zero-config_next">
                    <a href="?page={{ Articles.previous_page_number }}"
                       aria-controls="zero-config"
                       data-dt-idx="5"
                       tabindex="0"
                       class="page-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24"
                             fill="none" stroke="currentColor" stroke-width="2"
                             stroke-linecap="round"
                             stroke-linejoin="round"
                             class="feather feather-arrow-right">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </a></li>
                {% endif %}


                {% get_proper_elided_page_range paginator Articles.number as page_range %}


                {% for i in page_range %}
                {% if Articles.number == i %}
                <li class="paginate_button page-item active">
                    <a style="padding:8px !important" href="?page={{ i }}" aria-controls="zero-config"
                       data-dt-idx="1"
                       tabindex="0" class="page-link">{{ i }}</a>
                </li>
                {% else %}
                {% if i == paginator.ELLIPSIS %}
                <li class="page-item">
                    <span class="page-link">{{ paginator.ELLIPSIS }}</span>
                </li>
                {% else %}
                <li class="paginate_button page-item">
                    <a href="?page={{ i }}" aria-controls="zero-config"
                       data-dt-idx="1"
                       tabindex="0" class="page-link">{{ i }}</a>
                </li>
                {% endif %}
                {% endif %}
                {% endfor %}

                <li></li>
                {% if Articles.has_next %}
                <li class="paginate_button page-item previous "
                    id="zero-config_previous"><a
                        href="?page={{ Articles.next_page_number }}"
                        aria-controls="zero-config"
                        data-dt-idx="0" tabindex="0" class="page-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                         viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2"
                         stroke-linecap="round"
                         stroke-linejoin="round" class="feather feather-arrow-left">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                </a></li>

                {% endif %}


            </ul>
        </div>
    </div>
</div>